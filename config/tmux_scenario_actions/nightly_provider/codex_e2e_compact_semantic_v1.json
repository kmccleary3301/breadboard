[
  {"type":"startup_preflight","timeout":240,"interval":0.4,"ready_tokens":["OpenAI Codex","context left","model:"],"kick_keys":["q","Escape"],"kick_every_polls":1},
  {"type":"wait_until","require_contains_any":["gpt-5-codex","OpenAI Codex","for shortcuts","context left"],"require_timeout":60,"timeout":90},
  {"type":"send","text":"Reply exactly with: OK","clear_first":true,"clear_mode":"ctrl_u","submit":true,"must_match_regex":["(?m)^[•*]\\s*OK\\s*$"],"semantic_timeout":60},
  {"type":"send","text":"Reply exactly with: compact-precheck","clear_first":false,"submit":true,"must_match_regex":["(?m)^[•*]\\s*compact-precheck\\s*$"],"semantic_timeout":90},
  {"type":"wait_for_idle","timeout":180,"quiet_seconds":2.0,"accept_active_timeout":true,"accept_stable_active_after":8.0},
  {"type":"send","text":"/compact","clear_first":false,"submit":true},
  {"type":"wait_until","require_contains_any":["compact","compacted","Conversation compacted"],"require_timeout":120,"timeout":180,"must_not_contain":["Conversation interrupted"]},
  {"type":"wait_for_idle","timeout":300,"quiet_seconds":2.0,"accept_active_timeout":true,"accept_stable_active_after":8.0},
  {"type":"send","text":"Continue after compaction and reply exactly with: compact-ready","clear_first":false,"submit":true,"must_match_regex":["(?m)^[•*]\\s*compact-ready\\s*$"],"must_not_contain":["Conversation interrupted"],"semantic_timeout":240},
  {"type":"wait_for_idle","timeout":360,"quiet_seconds":2.0,"accept_active_timeout":true,"accept_stable_active_after":8.0},
  {"type":"send","text":"Show a markdown showcase with headings, bold/italic, inline code, fenced ts code block, table, and nested lists.","clear_first":false,"submit":true,"must_match_regex_any":["(?m)^\\s*#\\s+","(?m)^\\s*\\|.+\\|","(?m)^\\s*```","(?m)^\\s*[-*]\\s+","(?m)^\\s*\\d+\\.\\s+"],"semantic_timeout":420}
]
