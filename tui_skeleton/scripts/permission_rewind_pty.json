[
  { "action": "log", "message": "Permission + rewind PTY harness start" },
  { "action": "wait", "ms": 900 },
  { "action": "type", "text": "Trigger permission request (mock)." },
  { "action": "press", "key": "enter" },
  { "action": "waitFor", "text": "Permission required", "timeoutMs": 10000 },
  { "action": "snapshot", "label": "permission-modal" },
  { "action": "press", "key": "tab", "repeat": 1, "delayMs": 120 },
  { "action": "snapshot", "label": "permission-rules-tab" },
  { "action": "type", "text": "a" },
  { "action": "wait", "ms": 400 },
  { "action": "snapshot", "label": "permission-approved" },
  { "action": "press", "key": "escape", "repeat": 2, "delayMs": 120 },
  { "action": "waitFor", "text": "Rewind checkpoints", "timeoutMs": 10000 },
  { "action": "waitFor", "text": "Checkpoint 3", "timeoutMs": 10000 },
  { "action": "snapshot", "label": "rewind-menu" },
  { "action": "type", "text": "2" },
  { "action": "waitFor", "text": "Rewind restored", "timeoutMs": 10000 },
  { "action": "snapshot", "label": "rewind-restored" },
  { "action": "press", "key": "escape", "repeat": 2, "delayMs": 120 },
  { "action": "waitFor", "text": "Rewind checkpoints", "timeoutMs": 10000 },
  { "action": "waitFor", "text": "Checkpoint 3", "timeoutMs": 10000 },
  { "action": "snapshot", "label": "rewind-menu-again" },
  { "action": "press", "key": "escape" },
  { "action": "wait", "ms": 250 },
  { "action": "snapshot", "label": "rewind-closed" },
  { "action": "log", "message": "Permission + rewind PTY harness complete" }
]
