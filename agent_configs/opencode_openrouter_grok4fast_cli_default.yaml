extends: opencode_grok4fast_general.yaml

profile: { name: opencode-openrouter-grok4fast-cli-default }

providers:
  default_model: openrouter/x-ai/grok-4-fast
  stream_responses: true
  models:
    - id: openrouter/x-ai/grok-4-fast
      adapter: openai
      params:
        temperature: 0.2
        top_p: 0.9
        max_output_tokens: 4096
      routing:
        disable_stream_on_probe_failure: true
        disable_native_tools_on_probe_failure: true
        fallback_models: []

features:
  plan: false
  todos:
    enabled: true
    strict: true

guardrails:
  include: []
  overrides:
    zero_tool_watchdog:
      parameters:
        warn_after_turns: 999
        abort_after_turns: 999
        emit_event: false
    completion_guard:
      parameters:
        warnings_before_abort: 8
    provider_policy:
      parameters:
        allow_free_text: true
        ignore_policy_violations: true
    shell_write_block:
      parameters:
        enabled: false

turn_limit: 12

completion:
  primary: hybrid
  text_sentinels: ["TASK COMPLETE", ">>>>>> END RESPONSE"]
  provider_signals: true
  tool_finish: mark_task_complete
